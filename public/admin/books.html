<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js" integrity="sha512-oFOCo2/3DtjrJG4N27BjSLQWoiBv171sK6a+JiWjp/7agxC2nCUP358AqzxkBUb5jX8g6CYLPdSKQTbC0weCwA==" crossorigin="anonymous"></script>
  <title>Classroom Library</title>
  <link href="../css/output.css" rel="stylesheet">
  <link href="../css/snack.css" rel="stylesheet">
</head>
<body class="dark:bg-slate-800">


    <button data-drawer-target="default-sidebar" data-drawer-toggle="default-sidebar" aria-controls="default-sidebar" type="button" class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
        <span class="sr-only">Open sidebar</span>
        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
        </svg>
     </button>
     
     <aside id="default-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800">
           <ul class="space-y-2 font-medium">
              <li>
                 <a href="dashboard" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                     <path fill-rule="evenodd" d="M2.25 13.5a8.25 8.25 0 0 1 8.25-8.25.75.75 0 0 1 .75.75v6.75H18a.75.75 0 0 1 .75.75 8.25 8.25 0 0 1-16.5 0Z" clip-rule="evenodd" />
                     <path fill-rule="evenodd" d="M12.75 3a.75.75 0 0 1 .75-.75 8.25 8.25 0 0 1 8.25 8.25.75.75 0 0 1-.75.75h-7.5a.75.75 0 0 1-.75-.75V3Z" clip-rule="evenodd" />
                   </svg>                                                         
                    <span class="ms-3">Dashboard</span>
                 </a>
              </li>
              <li>
                 <a href="#" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6">
                     <path d="M10.75 16.82A7.462 7.462 0 0115 15.5c.71 0 1.396.098 2.046.282A.75.75 0 0018 15.06v-11a.75.75 0 00-.546-.721A9.006 9.006 0 0015 3a8.963 8.963 0 00-4.25 1.065V16.82zM9.25 4.065A8.963 8.963 0 005 3c-.85 0-1.673.118-2.454.339A.75.75 0 002 4.06v11a.75.75 0 00.954.721A7.506 7.506 0 015 15.5c1.579 0 3.042.487 4.25 1.32V4.065z" />
                   </svg>
                    <span class="flex-1 ms-3 whitespace-nowrap">Books</span>
                 </a>
              </li>
              <li>
                 <a href="students" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                     <path fill-rule="evenodd" d="M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z" clip-rule="evenodd" />
                     <path d="M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z" />
                  </svg>                   
                    <span class="flex-1 ms-3 whitespace-nowrap">Students</span>
                 </a>
              </li>
              <li>
                 <a href="mail" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6">
                     <path d="M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z" />
                     <path d="M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z" />
                   </svg>                   
                    <span class="flex-1 ms-3 whitespace-nowrap">Mail</span>             
                 </a>
              </li>
              <li>
                 <a href="advanced" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                     <path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" />
                   </svg>                   
                    <span class="flex-1 ms-3 whitespace-nowrap">Advanced</span>
                 </a>
              </li>
              
           </ul>
        </div>
     </aside>
     
     <div id="main" class="p-4 sm:ml-64">
        <h1 class="text-2xl text-center dark:text-white">Books</h1><br>

        <h2 class="text-base text-center dark:text-white">Access and modify book information here.</h2>

        <br><br><br><br>

        <button id="add-book-screen-btn" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Add a book to the library</button>

        <br><br><br><br>

        <div id="book-container" class="flex flex-wrap gap-6 gap-y-20">
         <h1 class="text-xl text-center dark:text-white">Fetching all books, please wait..</h1>

      </div>

      <br><br><br><br><br><br>

      <div class="flex justify-center">
         <input type="button" id="fetch-more-results-btn" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 cursor-pointer" value="Fetch More Results">
         <h1 class="text-lg dark:text-white" id="no-more-results"></h1>
      </div>
      
     </div>

     <div id="details-screen" class="p-4 sm:ml-64 hidden">
      <div class="h-72 w-full border-4 rounded-md border-black dark:border-slate-500 bg-slate-200 dark:bg-gray-700 p-4">
          <img id="details-img" class="h-60 w-32 shadow-xl shadow-black float-left">
          <h1 id="details-title" class="text-3xl dark:text-white relative top-0 left-7"></h1>
          <h1 id="details-author" class="text-xl dark:text-white relative top-8 left-7">Author:<br></h1>
          <h1 id="details-genre" class="text-lg dark:text-white relative top-16 left-7">Genre:<br></h1>
      </div>
      <br>

      <a id="back-btn" class="text-md dark:text-white underline cursor-pointer">&lt&lt See all results</a>

      <br><br>

      <h1 id="book_available" class="text-lg dark:text-white"></h1>
      <!-- <button type="button" data-modal-target="check-modal" data-modal-toggle="check-modal" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800">Blah</button> -->
      <button id="remove-book-btn" data-modal-target="remove-book-modal" data-modal-toggle="remove-book-modal" class="cursor-pointer focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">Remove Book!!!</button>
      <br><br>

      <!-- Remove book modal -->
      <div id="remove-book-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
          <div class="relative p-4 w-full max-w-md max-h-full">
              <!-- Modal content -->
              <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                  <!-- Modal header -->
                  <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                      <h3 id="checking-out-modal-text" class="text-xl font-semibold text-gray-900 dark:text-white text-center">
                          ARE YOU SURE ABOUT THIS?
                      </h3>
                      <button type="button" class="end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="remove-book-modal">
                          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                          </svg>
                          <span class="sr-only">Close modal</span>
                      </button>
                  </div>
                  <!-- Modal body -->
                  <div class="p-4 md:p-5">
                      <form class="space-y-4" action="#">
                          <div>
                              <h1 class="text-md text-center dark:text-white">You are about to delete this book. All data associated with this book will be deleted.<br><br><span class="font-semibold">This action is irreversible.</span><br><br>Are you SURE you want to proceed?</h1>
                              <br>
                          </div>
                          <button id="remove-book-btn-final" type="button" class="w-full cursor-pointer focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">I'm Sure. Delete this book.</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>

      <!--

          LIGHT: text-yellow-300

          DARK:  text-gray-300 dark:text-gray-500

      -->

      <div id="total-ratings" class="flex items-center">
          <svg class="w-4 h-4 text-gray-300 dark:text-gray-500 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
              <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
          </svg>
          <svg class="w-4 h-4 text-gray-300 dark:text-gray-500 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
              <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
          </svg>
          <svg class="w-4 h-4 text-gray-300 dark:text-gray-500 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
              <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
          </svg>
          <svg class="w-4 h-4 text-gray-300 dark:text-gray-500 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
              <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
          </svg>
          <svg class="w-4 h-4 text-gray-300 dark:text-gray-500 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
              <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
          </svg>
          <p id="total-ratings-text" class="ms-1 text-sm font-medium text-gray-500 dark:text-gray-400"><!--4.95 out of 5 (10 total reviews)--></p>
      </div>
      <br>
      <p id="total-ratings-2-text" class="ms-1 text-sm font-medium text-gray-500 dark:text-gray-400"><!-- 1,234 total reviews! --></p>

      <div id="ratings-graphic" class="flex items-center mt-4">
          <a href="#" class="text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline">5 star</a>
          <div class="w-2/4 h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700">
              <div id="bar-1" class="h-5 bg-yellow-300 rounded"></div>
          </div>
          <span id="number-1" class="text-sm font-medium text-gray-500 dark:text-gray-400"></span>
      </div>
      <div class="flex items-center mt-4">
          <a href="#" class="text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline">4 star</a>
          <div class="w-2/4 h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700">
              <div id="bar-2" class="h-5 bg-yellow-300 rounded"></div>
          </div>
          <span id="number-2" class="text-sm font-medium text-gray-500 dark:text-gray-400"></span>
      </div>
      <div class="flex items-center mt-4">
          <a href="#" class="text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline">3 star</a>
          <div class="w-2/4 h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700">
              <div id="bar-3" class="h-5 bg-yellow-300 rounded"></div>
          </div>
          <span id="number-3" class="text-sm font-medium text-gray-500 dark:text-gray-400"></span>
      </div>
      <div class="flex items-center mt-4">
          <a href="#" class="text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline">2 star</a>
          <div class="w-2/4 h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700">
              <div id="bar-4" class="h-5 bg-yellow-300 rounded"></div>
          </div>
          <span id="number-4" class="text-sm font-medium text-gray-500 dark:text-gray-400"></span>
      </div>
      <div class="flex items-center mt-4">
          <a href="#" class="text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline">1 star</a>
          <div class="w-2/4 h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700">
              <div id="bar-5" class="h-5 bg-yellow-300 rounded"></div>
          </div>
          <span id="number-5" class="text-sm font-medium text-gray-500 dark:text-gray-400"></span>
      </div>

      <br>

      <hr>

      <br>

      <div id="root-reviews-div">

          <!--<div class="flex items-center">
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1 dark:text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
          </div>

          <h1 class="text-md dark:text-white mb-2 mt-2">juanr1145</h1>
          <h2 class="text-sm dark:text-white">Absoloutely my favorite book. I would totally recommend it to anyone who likes dystopian-type books.</h2>
          <br>

          <div class="flex items-center">
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-yellow-300 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
              <svg class="w-4 h-4 text-gray-300 me-1 dark:text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
              </svg>
          </div>

          <h1 class="text-md dark:text-white mb-2 mt-2">student1000</h1>
          <h2 class="text-sm dark:text-white">It was alright. Not my cup of tea but to be honest I would really like it if x and y happened, but I can see why people like it. Read it if you'd like, I would never stop you. :]</h2>-->
      </div>


     </div>

     <div id="add-book-screen" class="p-4 sm:ml-64 hidden">
      <div class="h-72 w-full border-4 rounded-md border-black dark:border-slate-500 bg-slate-200 dark:bg-gray-700 p-4">
          <img id="add-book-img" src="" class="h-60 w-32 shadow-xl shadow-black float-left">
          
          <!--
          <input type="text" id="add-book-title" class="text-3xl dark:text-white relative top-0 left-7 dark:bg-slate-800" placeholder="Enter Title"><br>
          <input type="text" id="add-book-author" class="text-xl dark:text-white relative top-8 left-7 dark:bg-slate-800" placeholder="Enter Author"><br>
          -->

         <h1 id="add-book-title" class="text-3xl dark:text-white relative top-0 left-7" style="outline: none;" contenteditable="true">Enter Title..</h1>
         <h1 id="add-book-author" class="text-xl dark:text-white relative top-8 left-7" style="outline: none;" contenteditable="true">Enter Author..<br></h1>

          <!--<input type="text" id="add-book-genre" class="text-lg dark:text-white relative top-16 left-7 dark:bg-slate-800" placeholder="Enter Genre">--><br><br><br>

          <button id="dropdown-genre-button" data-dropdown-toggle="dropdown-genre" class="w-1/2 text-white font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center text-gray-900 bg-gray-100 border border-gray-300 hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 dark:bg-slate-800 dark:hover:bg-gray-600 dark:focus:ring-gray-700 dark:text-white dark:border-gray-600" style="margin-left: 2rem;" type="button">Pick Genre.. <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
            </svg>
            </button>

            <style>
               @media (max-width: 390px) { /* 768px */
                  #dropdown-genre-button {
                     position: relative;
                     bottom: 5rem;
                     left: 7.5rem;
                  }
               }
            </style>
            
            <!-- Dropdown menu -->
            <div id="dropdown-genre" class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
                <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdown-genre-button">
                  <li>
                    <a href="#" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Fiction</a>
                  </li>
                </ul>
            </div>

      </div>
      <br>

      <h1 id="add-book-isbn" class="text-3xl dark:text-white relative top-0 left-5" style="outline: none;" contenteditable="true">Enter ISBN..</h1><br>

      <a id="add-book-back-btn" class="text-md dark:text-white underline cursor-pointer">&lt&lt See all books</a>

      <br><br>
      <br>
      <button id="add-book-btn" data-modal-target="add-book-modal" data-modal-toggle="add-book-modal" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Add Book To Library</button>
      <button id="auto-book-btn" data-modal-target="auto-book-modal" data-modal-toggle="auto-book-modal" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Auto-Generate Book Information</button>
      <br><br>


      <!-- Main Return modal -->
      <div id="add-book-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
          <div class="relative p-4 w-full max-w-md max-h-full">
              <!-- Modal content -->
              <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                  <!-- Modal header -->
                  <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                      <h3 id="add-book-modal-text" class="text-xl font-semibold text-gray-900 dark:text-white text-center">
                          .....
                      </h3>
                      <button type="button" class="end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="add-book-modal">
                          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                          </svg>
                          <span class="sr-only">Close modal</span>
                      </button>
                  </div>
                  <!-- Modal body -->
                  <div class="p-4 md:p-5">
                      <form class="space-y-4" action="#">
                          <div>
                              <h1 class="text-md text-center dark:text-white">Are you sure you want to add this book to the library?<br>
                              Make sure all the information is correct, then press "I'm sure"!</h1>
                          </div>
                          <div><br>

                          </div>
                          <button id="add-book-btn-final" type="button" class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">I'm Sure!</button>
                          <button id="add-book-return-btn-final" type="button" class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900" data-modal-hide="add-book-modal">No, Cancel!</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>

      <!-- Main Extend modal -->
      <div id="auto-book-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
          <div class="relative p-4 w-full max-w-md max-h-full">
              <!-- Modal content -->
              <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                  <!-- Modal header -->
                  <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                      <h3 id="auto-book-modal-text" class="text-xl font-semibold text-gray-900 dark:text-white text-center">
                          Auto-Generate Book Information
                      </h3>
                      <button type="button" class="end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="auto-book-modal">
                          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                          </svg>
                          <span class="sr-only">Close modal</span>
                      </button>
                  </div>
                  <!-- Modal body -->
                  <div class="p-4 md:p-5">
                      <form class="space-y-4" action="#">
                          <div>
                              <h1 class="text-md text-center dark:text-white">Don't want to fill in book details manually?<br>
                              Try auto-generating them for you! Just allow access to your camera and scan a valid ISBN-13 code!</h1>
                          </div>
                          <div>
                              <!--<h1 class="text-md text-center dark:text-white">Would you like to leave a review on this book?<br>
                              It would help others a lot!</h1><br>-->

                              <br>
                              <button id="scan" type="button" class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Scan!</button>
                              <div style="display: flex; justify-content: center;">
                                 <video autoplay="true" id="video" width="300" height="200" playsinline></video> <!-- 800 x 500 -->
                              </div><br>

                              <h1 id="code" class="text-md text-center dark:text-white">Waiting for code..</h1>

                          <!--<button id="auto-book-btn-final" type="button" class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Return</button>-->
                      </form>
                  </div>
              </div>
          </div>
      </div>

  </div>

  <script>
   let gnrs = document.querySelector("#dropdown-genre").querySelectorAll("a");
   for(let i = 0; i < gnrs.length; i++){
       gnrs[i].addEventListener("click", () => {
           document.querySelector("#dropdown-genre-button").innerHTML = `${gnrs[i].innerText} <svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
       <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
       </svg>`
       document.querySelector("#dropdown-genre-button").click();
       document.querySelector("#dropdown-genre").classList.remove("block");
       document.querySelector("#dropdown-genre").classList.add("hidden");
       });
   }
   </script>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.js" integrity="sha512-tkMtg2br+OytX7fpdDoK34wzSUc6JcJa7aOEYUKwlSAAtqTSYVLocV4BpLBIx3RS+h+Ch6W+2lVSzNxQx4yefw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   
   <script>
      let automagicallyFillInDetails = async (ISBN) => {
         await fetch(`https://covers.openlibrary.org/b/isbn/${ISBN}-M.jpg`).then(res => {
            if(res.status === 200){
               document.querySelector("#add-book-img").setAttribute("src", res.url);
            }else{
               document.querySelector("#add-book-img").setAttribute("src", "https://via.placeholder.com/300x200");
            }
         });

         let author_url = "https://openlibrary.org";
         await fetch(`https://openlibrary.org/isbn/${ISBN}.json`).then(async res =>{
            await res.json().then(json => {
               document.querySelector("#add-book-title").innerText = json.title;
               author_url += json.authors[0].key + ".json";
            });
         });

         await fetch(author_url).then(async res => await res.json().then(json => {
            document.querySelector("#add-book-author").innerText = json.name;
            document.querySelector("#code").innerText = JSON.stringify(json);
         }));

         document.querySelector("#code").innerText = `Fetching complete with ISBN: ${ISBN}. Make sure results are accurate and fill in any missing details, or scan again!`;
      }

      document.querySelector("#add-book-img").addEventListener("click", (e) => {
         e.preventDefault();
         const fileInput = document.createElement("input");
         fileInput.type = "file";
         fileInput.accept = "image/*";
         fileInput.addEventListener("change", (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.addEventListener("load", () => {
               document.querySelector("#add-book-img").setAttribute("src", reader.result);
            });
            reader.readAsDataURL(file);
         });
         fileInput.click();
      });

   </script>
   
   <script>
      document.querySelector("#scan").addEventListener("click", () => {
         let video = document.querySelector("#video");

         if(navigator.mediaDevices.getUserMedia){
            alert("API supported! :)\nPlease allow access to your camera.");
            navigator.mediaDevices.getUserMedia({ video: {facingMode: "environment"} }).then(stream => {
                  video.srcObject = stream;
            }).catch(err => {
                  console.log(err);
            });
         }else{
            alert("API not supported. :(\nPlease try on another device.");
         }

         Quagga.init({
            inputStream: {
                  name: "Live",
                  type: "LiveStream",
                  target: video
            },
            decoder: {
                  readers: ["ean_reader"]
            }
         }, (err) => {
            if(err){
                  console.log(err);
                  return;
            }

            console.log("Initializing done. Starting");
            Quagga.start();
         });

         // document.querySelector("#scan").remove();
      });

      Quagga.onDetected(data => {
         alert("Scanned: " + data.codeResult.code);
         document.querySelector("#add-book-isbn").innerText = data.codeResult.code;
         document.querySelector("#add-book-title").setAttribute("isbn", data.codeResult.code);
         document.querySelector("#code").innerText = `Fetching data...`;
         Quagga.stop();
         automagicallyFillInDetails(data.codeResult.code);
         let video = document.querySelector("#video");
         video.srcObject = null;
      });
   </script>
    
   <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/snack.js"></script>
  <script src="js/books.js"></script>
</body>
</html>
